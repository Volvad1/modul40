{"ast":null,"code":"var _jsxFileName = \"/Users/vadimvolodin/Downloads/ScanSkillfactory-main/src/pages/ResultsPage/ResultsPage.jsx\",\n  _s = $RefreshSig$();\n// ResultsPage.jsx\n/**\n * ResultsPage Component.\n * This component is the main container for the search results page.\n * It displays a summary table and a list of articles based on the search results.\n * The component also handles redirection to the authentication page if the user is not logged in.\n * It shows a loading state while the search results are being fetched and an error message if there is an error.\n *\n * @returns {JSX.Element} The ResultsPage component with the search results or an error message.\n */\nimport React, { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../hooks/AuthContext';\nimport useSearchResults from '../../hooks/useSearchResults';\nimport GeneralSummaryTable from './SummaryTable/SummaryTable';\nimport ArticleCards from './ArticleCards/ArticleCards';\nimport styles from './ResultsPage.module.scss';\nimport ResultsLargeImg from '../../assets/search_results_large_picture.svg';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ResultsPage = () => {\n  _s();\n  var _location$state;\n  const location = useLocation();\n  const {\n    isLoggedIn\n  } = useAuth();\n  const navigate = useNavigate();\n  const searchParams = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.searchParams;\n  const {\n    isLoading,\n    histogramData,\n    documentData,\n    error\n  } = useSearchResults(searchParams);\n\n  // Redirect to authentication page if not logged in\n  useEffect(() => {\n    if (!isLoggedIn) {\n      navigate('/auth');\n    }\n  }, [isLoggedIn, navigate]);\n\n  // Display error message if there is an error fetching data\n  if (error || !isLoading && (!documentData || !Array.isArray(documentData) || documentData.length === 0)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.error,\n      children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Render the ResultsPage component\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.resultPage,\n    children: [isLoading && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.resultPage__titleBlock,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: styles.resultPage__titleBlock_h1,\n            children: \"\\u0418\\u0449\\u0435\\u043C. \\u0421\\u043A\\u043E\\u0440\\u043E \\u0431\\u0443\\u0434\\u0443\\u0442 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.resultPage__titleBlock_p,\n            children: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0437\\u0430\\u043D\\u044F\\u0442\\u044C \\u043D\\u0435\\u043A\\u043E\\u0442\\u043E\\u0440\\u043E\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F, \\u043F\\u0440\\u043E\\u0441\\u0438\\u043C \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u044F\\u0442\\u044C \\u0442\\u0435\\u0440\\u043F\\u0435\\u043D\\u0438\\u0435.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.resultPage__largePicture,\n          src: ResultsLargeImg,\n          alt: \"Results Page img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(GeneralSummaryTable, {\n        searchData: histogramData,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), !isLoading && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(GeneralSummaryTable, {\n        searchData: histogramData,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), documentData && Array.isArray(documentData) && documentData.length > 0 && /*#__PURE__*/_jsxDEV(ArticleCards, {\n        documentsData: documentData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(ResultsPage, \"CzE/s6i+7F4q1a4aP4qWNEwMFYA=\", false, function () {\n  return [useLocation, useAuth, useNavigate, useSearchResults];\n});\n_c = ResultsPage;\nexport default ResultsPage;\nvar _c;\n$RefreshReg$(_c, \"ResultsPage\");","map":{"version":3,"names":["React","useEffect","useLocation","useNavigate","useAuth","useSearchResults","GeneralSummaryTable","ArticleCards","styles","ResultsLargeImg","jsxDEV","_jsxDEV","Fragment","_Fragment","ResultsPage","_s","_location$state","location","isLoggedIn","navigate","searchParams","state","isLoading","histogramData","documentData","error","Array","isArray","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","resultPage","resultPage__titleBlock","resultPage__titleBlock_h1","resultPage__titleBlock_p","resultPage__largePicture","src","alt","searchData","documentsData","_c","$RefreshReg$"],"sources":["/Users/vadimvolodin/Downloads/ScanSkillfactory-main/src/pages/ResultsPage/ResultsPage.jsx"],"sourcesContent":["// ResultsPage.jsx\n/**\n * ResultsPage Component.\n * This component is the main container for the search results page.\n * It displays a summary table and a list of articles based on the search results.\n * The component also handles redirection to the authentication page if the user is not logged in.\n * It shows a loading state while the search results are being fetched and an error message if there is an error.\n *\n * @returns {JSX.Element} The ResultsPage component with the search results or an error message.\n */\nimport React, {useEffect} from 'react';\nimport {useLocation, useNavigate} from 'react-router-dom';\nimport {useAuth} from '../../hooks/AuthContext';\nimport useSearchResults from '../../hooks/useSearchResults';\n\nimport GeneralSummaryTable from './SummaryTable/SummaryTable';\nimport ArticleCards from './ArticleCards/ArticleCards';\n\nimport styles from './ResultsPage.module.scss';\nimport ResultsLargeImg from '../../assets/search_results_large_picture.svg';\n\nconst ResultsPage = () => {\n  const location = useLocation();\n  const { isLoggedIn } = useAuth();\n  const navigate = useNavigate();\n  const searchParams = location.state?.searchParams;\n\n  const { isLoading, histogramData, documentData, error } = useSearchResults(searchParams);\n\n  // Redirect to authentication page if not logged in\n  useEffect(() => {\n    if (!isLoggedIn) {\n      navigate('/auth');\n    }\n  }, [isLoggedIn, navigate]);\n\n  // Display error message if there is an error fetching data\n  if (error || (!isLoading && (!documentData || !Array.isArray(documentData) || documentData.length === 0))) {\n    return <div className={styles.error}>Ошибка полученных данных</div>;\n  }\n\n  // Render the ResultsPage component\n  return (\n    <div className={styles.resultPage}>\n      {/* Loading state with title and image */}\n      {isLoading && (\n        <>\n          <div className={styles.resultPage__titleBlock}>\n            <div>\n              <h1 className={styles.resultPage__titleBlock_h1}>\n                Ищем. Скоро будут результаты\n              </h1>\n              <p className={styles.resultPage__titleBlock_p}>\n                Поиск может занять некоторое время, просим сохранять терпение.\n              </p>\n            </div>\n            <img\n              className={styles.resultPage__largePicture}\n              src={ResultsLargeImg}\n              alt=\"Results Page img\"\n            />\n          </div>\n          {/* General summary table showing during loading */}\n          <GeneralSummaryTable\n            searchData={histogramData}\n            isLoading={isLoading}\n          />\n        </>\n      )}\n\n      {/* Display summary table and article cards when not loading */}\n      {!isLoading && (\n        <>\n          <GeneralSummaryTable\n            searchData={histogramData}\n            isLoading={isLoading}\n          />\n\n          {/* Article cards with search results */}\n          {documentData && Array.isArray(documentData) && documentData.length > 0 && (\n            <ArticleCards documentsData={documentData} />\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ResultsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}